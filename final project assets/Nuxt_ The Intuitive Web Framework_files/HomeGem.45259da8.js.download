import{q as p,M as I,o as P,b as R,e as C,K as L,u as z,_ as m,aq as D}from"./entry.378892ca.js";import{u as S}from"./composables.cd92146d.js";/* empty css                                                */const T=globalThis.requestIdleCallback||function(h){const r=Date.now(),s={didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-r))}};return setTimeout(function(){h(s)},1)},q={__name:"HomeGem",setup(h){const r=p(),s=p(null),d=p(null),y=S();{async function f(){const t=await m(()=>import("./three.module.515ef7ba.js"),[],import.meta.url).then(a=>a.default||a),{OrbitControls:u}=await m(()=>import("./OrbitControls.f20534e8.js"),["./OrbitControls.f20534e8.js","./three.module.515ef7ba.js"],import.meta.url).then(a=>a.default||a),{GLTFLoader:l}=await m(()=>import("./GLTFLoader.407fc059.js"),["./GLTFLoader.407fc059.js","./three.module.515ef7ba.js"],import.meta.url).then(a=>a.default||a),{RGBELoader:w}=await m(()=>import("./RGBELoader.32f2153a.js"),["./RGBELoader.32f2153a.js","./three.module.515ef7ba.js"],import.meta.url).then(a=>a.default||a),x=new l,n=new t.WebGLRenderer({alpha:!0,antialias:!0});n.outputEncoding=t.sRGBEncoding,n.toneMapping=t.ACESFilmicToneMapping,n.toneMappingExposure=1,window.matchMedia("(min-width: 640px)").matches?n.setSize(475,475):window.matchMedia("(min-width: 400px)").matches?n.setSize(240,240):n.setSize(180,180);const _=new t.Scene;let o;const g=new w().load("/assets/home/environment_D.hdr",()=>{g.mapping=t.EquirectangularReflectionMapping}),v=new w().load("/assets/home/environment_L.hdr",()=>{v.mapping=t.EquirectangularReflectionMapping}),e=new t.MeshPhysicalMaterial({});x.load("/assets/home/gem.glb",function(a){o=a.scene.children[0],o.traverse(E=>{E.isMesh&&(E.material=e),o.scale.set(1,1,1),o.position.set(0,0,0),o.rotation.z=.3,_.add(o),r.value=!0})}),d.value.appendChild(n.domElement),n.setPixelRatio(window.devicePixelRatio);function b(){window.matchMedia("(min-width: 640px)").matches?n.setSize(475,475):window.matchMedia("(min-width: 400px)").matches?n.setSize(240,240):n.setSize(180,180)}D(window,"resize",()=>{b()}),s.value.style.opacity=0,setTimeout(()=>{s.value.style.opacity=1},1e3);const c=new t.PerspectiveCamera(50,1,.1,400);c.aspect=1,c.position.z=245;const i=new u(c,n.domElement);i.enableDamping=!0,i.dampingFactor=.05,i.enableZoom=!1,i.enablePan=!1,i.maxPolarAngle=Math.PI*.5,i.minPolarAngle=Math.PI*.5,i.update();function M(){y.value==="dark"?(e.color=new t.Color(56450),e.metalness=.05,e.roughness=.1,e.transmission=1,e.thickness=1,e.envMap=g,e.envMapIntensity=.8,e.specularIntensity=1,e.specularColor=new t.Color(16777215),e.sheen=0,e.clearcoat=0,e.flatShading=!0):(e.color=new t.Color(0),e.metalness=0,e.roughness=0,e.transmission=.82,e.thickness=5.1,e.envMap=v,e.envMapIntensity=.3,e.specularIntensity=.61,e.specularColor=0,e.sheen=.78,e.clearcoat=.16,e.flatShading=!0),requestAnimationFrame(M),o&&(o.rotation.y+=.01),i.update(),n.render(_,c)}M()}I(()=>T(()=>{const t=new IntersectionObserver(u=>{u.forEach(l=>{l.isIntersecting&&(f(),t.unobserve(l.target))})},{threshold:.5});t.observe(d.value)}))}return(f,t)=>(P(),R("div",{id:"gemWrapper",ref_key:"gemWrapper",ref:s,style:L({opacity:z(r)?1:0}),class:"transition duration-1000"},[C("div",{ref_key:"gemAnim",ref:d},null,512)],4))}};export{q as default};
